# //////////////////////////////////////////////////////////////////////////////
- ws.catkin:
# //////////////////////////////////////////////////////////////////////////////

  # connect to the remote host
  - +ssh:{ $ROBOT.$ROBOT_COMPUTER }

  # run catkin builds inside the docker container ?
  # - +docker:$DOCKER_CONTAINER

  - cd $SUBT_PATH/
  - pwd
  - whoami

  # ////////////////////////////////////////////////////////////////////////////
  - clean:
  # ////////////////////////////////////////////////////////////////////////////
    - rm -rf ~/deploy_ws/devel/ugv/perception
    - rm -rf ~/deploy_ws/build/ugv/perception
    - rm -rf ~/deploy_ws/install/ugv/perception
    - rm -rf ~/deploy_ws/logs/ugv/perception

  # ////////////////////////////////////////////////////////////////////////////
  - build:
  # ////////////////////////////////////////////////////////////////////////////

    - common:
      - cd ~/deploy_ws/src/common
      - rm -f .catkin_tools/profiles/profiles.yaml
      - catkin profile list
      - catkin profile set ugv.nuc.wifi
      - catkin config
      - catkin build --force-cmake

    - perception:
      - cd ~/deploy_ws/src/perception
      - rm -f .catkin_tools/profiles/profiles.yaml
      # ignore slam/devel repos
      - catkin profile list
      - catkin profile set ugv.nuc.wifi
      - catkin config
      - catkin build --force-cmake

    - subt_launch:
      - cd ~/deploy_ws/src/subt_launch
      - rm -f .catkin_tools/profiles/profiles.yaml
      - catkin profile list
      - catkin profile set ugv.nuc.wifi
      - catkin config
      - catkin build --force-cmake
