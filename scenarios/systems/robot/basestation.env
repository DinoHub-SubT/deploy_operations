# //////////////////////////////////////////////////////////////////////////////
# Source and export 'robot' basestation configuration setups
# - includes other common source files
# //////////////////////////////////////////////////////////////////////////////

# filepath of this file as being sourced
SOURCED_FILE_PATH=$(dirname "${BASH_SOURCE}")

# source the robot file
. ${SOURCED_FILE_PATH}/.robot.env

# source the basestation transfer files
. ${SOURCED_FILE_PATH}/../../transfer/basestation.env

# source the robot IP and hostname configuration
. ${SOURCED_FILE_PATH}/../../.shared.env ${1} basestation

# export the scenario file
export ROBOT_SCENARIO_FILE=${BASH_SOURCE}

# Setup the bashrc roscore environment variables
# ugly -- for now...
if [[ "$(hostname)" == "system76-pc" ]]; then
    echo "using basestation b1"
    export ROS_MASTER_IP=$basestation1_ip
    export ROS_HOSTNAME=$basestation1_hostname

    export basestation_hostname=$basestation1_hostname
    export basestation_ip=$basestation1_ip
elif [[ "$(hostname)" == "b2" ]]; then
    echo "using basestation b2"
    export ROS_MASTER_IP=$basestation2_ip
    export ROS_HOSTNAME=$basestation2_hostname

    export basestation_hostname=$basestation2_hostname
    export basestation_ip=$basestation2_ip
elif [[ "$(hostname)" == "b3" ]]; then
    echo "using basestation b3"
    export ROS_MASTER_IP=$basestation3_ip
    export ROS_HOSTNAME=$basestation3_hostname

    export basestation_hostname=$basestation3_hostname
    export basestation_ip=$basestation3_ip
else
    echo "Something went wrong";
fi
